<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 6.0.1 | Copyright Dean Attali 2023 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  

  <title>Optimized prime miner | Aaditya's Space</title>

  
  
  <meta name="author" content="Aaditya Bhave">
  

  <meta name="description" content="My Take on Optimization">

  

  

  
  <link rel="alternate" type="application/rss+xml" title="Aaditya's Space" href="http://localhost:4000/feed.xml">
  

  

  

  

  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="Aaditya's Space">
  <meta property="og:title" content="Optimized prime miner | Aaditya's Space">
  <meta property="og:description" content="My Take on Optimization">

  
  <meta property="og:image" content="http://localhost:4000/assets/img/path.jpg">
  

  
  <meta property="og:type" content="article">
  
  <meta property="og:article:author" content="Aaditya Bhave">
  
  <meta property="og:article:published_time" content="2024-11-03T00:00:00-05:00">
  <meta property="og:url" content="http://localhost:4000/2024-11-03-Prime-Miner-Optimization/">
  <link rel="canonical" href="http://localhost:4000/2024-11-03-Prime-Miner-Optimization/">
  

  
  <meta name="twitter:card" content="summary_large_image">
  
  <meta name="twitter:site" content="@">
  <meta name="twitter:creator" content="@">

  <meta property="twitter:title" content="Optimized prime miner | Aaditya's Space">
  <meta property="twitter:description" content="My Take on Optimization">

  
  <meta name="twitter:image" content="http://localhost:4000/assets/img/path.jpg">
  

  


  

  
  

  

</head>


<body>
  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="http://localhost:4000/">Aaditya's Space</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" id="nav-search-link" href="#" title="Search">
            <span id="nav-search-icon" class="fa fa-search"></span>
            <span id="nav-search-text">Search</span>
          </a>
        </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="http://localhost:4000/">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/avatar-icon.png" />
        </a>
      </div>
    </div>
  

</nav>



<div id="beautifuljekyll-search-overlay">

  <div id="nav-search-exit" title="Exit search">✕</div>
  <input type="text" id="nav-search-input" placeholder="Search">
  <ul id="search-results-container"></ul>
  
  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  <script>
    SimpleJekyllSearch({
      searchInput: document.getElementById('nav-search-input'),
      resultsContainer: document.getElementById('search-results-container'),
      json: '/assets/data/searchcorpus.json' 
    });
  </script>
</div>





  


  <div id="header-big-imgs" data-num-img=1
    
    
    
    
      data-img-src-1="http://localhost:4000/assets/img/path.jpg"
    
    
    
  ></div>


<header class="header-section has-img">
<div class="intro-header  big-img ">
  
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Optimized prime miner</h1>
          
            
              <h2 class="post-subheading">My Take on Optimization</h2>
            
          
          
           
            
              By <strong>Aaditya Bhave</strong><br>
            
            <span class="post-meta">Posted on November 3, 2024</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
  
  <span class='img-desc'></span>
</div>



</header>


<main class=" container-md ">
  <div class="row">
    <div class=" col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 ">

      

      

      <div class="blog-post">
        <p><br /></p>

<h2 id="optimized-prime-miner">Optimized prime miner</h2>

<p>I used the Square Root Theorem for Primality Testing as the base program. It works by taking the new number’s square root and checking if prime numbers less than the root can divide it. If they cannot, it is prime. The program’s goal is to compute as many primes as it can.</p>

<p>In programming, there are many types of optimizations, but most of them work towards saving resources and time. I implemented such optimizations and mathematical logic to optimize my program.
Iterating by 2
We know no prime numbers other than two are even, so we can skip the even numbers by iterating by 2. This optimization halves the loops already.
<br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>number += 2
</code></pre></div></div>

<p>Memoization
Memoization is an optimization where the results of expensive function calls are stored for reuse. This helps in recursive programs like ours. The primes are calculated and stored in a list to compare with the new number. So we don’t have to recalculate each prime every loop.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>while True:
    if is_prime(number, known_primes):
        largest_prime = number
        prime_count += 1
        known_primes.append(number)
</code></pre></div></div>

<p>Where do we store these primes? Well, we store them on the RAM! Numbers take up very little digital space so we can store hundreds of thousands of numbers on our RAM with ease. We can monitor the RAM usage with a library called psutil.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import psutil
process = psutil.Process()
ram_usage_gb = process.memory_info().rss / (1024 ** 3)
print(f"Program RAM Usage: {ram_usage_gb:.2f} GB")
</code></pre></div></div>

<h3 id="notification">Notification</h3>

<p class="box-note"><strong>Note:</strong> The data structure for storing these vast numbers is a simple Python list. We could have used other data structures like numpy arrays or dictionaries, but on testing, they give a higher time complexity. Numpy arrays are great, but not for our use case. They are excellent for vectorization and operations on massive datasets, but we only need to store and retrieve data.</p>

<p>Five divisibility
If a number ends with 0 or 5, it is divisible by 5. We can use this logic to skip many checks and reduce our complexity even further.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if n % 10 in (0, 5):
    return False
    return False
</code></pre></div></div>

<p>Redundant calculations
Instead of iterating through known primes and checking each time if the prime’s square is greater than the new number we can reverse it. Initially, on receiving the new number we can calculate its square root and simply check if the prime in our list is greater than the square root. As the numbers get bigger this optimization makes a huge difference.</p>

<h2 id="code">Code</h2>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="code"><pre><span class="err">#</span> <span class="nx">importing</span> <span class="nx">libraries</span>
<span class="k">import</span> <span class="nx">math</span>
<span class="k">import</span> <span class="nx">os</span>
<span class="k">import</span> <span class="nx">time</span>
<span class="k">import</span> <span class="nx">psutil</span>


<span class="err">#</span> <span class="kd">function</span> <span class="nf">for</span> <span class="nx">clearing</span> <span class="nx">the</span> <span class="nx">screen</span>

<span class="nx">def</span> <span class="nf">clear_screen</span><span class="p">():</span>
    <span class="nx">os</span><span class="p">.</span><span class="nf">system</span><span class="p">(</span><span class="dl">'</span><span class="s1">cls</span><span class="dl">'</span><span class="p">)</span>


<span class="err">#</span> <span class="kd">function</span> <span class="nf">to</span> <span class="nx">check</span> <span class="k">if</span> <span class="nx">the</span> <span class="nx">number</span> <span class="nx">is</span> <span class="nx">prime</span>
<span class="nx">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">known_primes</span><span class="p">):</span>

    <span class="k">if</span> <span class="nx">n</span> <span class="o">%</span> <span class="mi">10</span> <span class="k">in </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
        <span class="k">return</span> <span class="nx">False</span>

    <span class="nx">sqrtn</span> <span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>

    <span class="k">for</span> <span class="nx">prime</span> <span class="k">in</span> <span class="nx">known_primes</span><span class="p">:</span>
        <span class="k">if</span> <span class="nx">prime</span> <span class="o">&gt;</span> <span class="nx">sqrtn</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="nx">n</span> <span class="o">%</span> <span class="nx">prime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nx">False</span>
    <span class="k">return</span> <span class="nx">True</span>


<span class="err">#</span> <span class="kd">function</span> <span class="nf">to</span> <span class="nx">record</span> <span class="nx">and</span> <span class="nx">iterate</span> <span class="nx">numbers</span>
<span class="nx">def</span> <span class="nf">find_primes</span><span class="p">():</span>
    <span class="nx">largest_prime</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nx">prime_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nx">checked_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nx">number</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="nx">known_primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="nx">process</span> <span class="o">=</span> <span class="nx">psutil</span><span class="p">.</span><span class="nc">Process</span><span class="p">()</span>

    <span class="k">while</span> <span class="nx">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="nf">is_prime</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">known_primes</span><span class="p">):</span>
            <span class="nx">largest_prime</span> <span class="o">=</span> <span class="nx">number</span>
            <span class="nx">prime_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nx">known_primes</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span>


        <span class="nx">checked_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="err">#</span> <span class="nx">print</span> <span class="nx">statements</span>
        <span class="k">if</span> <span class="nx">checked_count</span> <span class="o">%</span> <span class="mi">100000</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nx">ram_usage_gb</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nf">memory_info</span><span class="p">().</span><span class="nx">rss</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
            <span class="nf">clear_screen</span><span class="p">()</span>
            <span class="nf">print</span><span class="p">(</span><span class="nx">f</span><span class="dl">"</span><span class="s2">Highest Prime Found: {largest_prime}</span><span class="dl">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="nx">f</span><span class="dl">"</span><span class="s2">Checked Numbers: {checked_count}</span><span class="dl">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="nx">f</span><span class="dl">"</span><span class="s2">Prime Count: {prime_count}</span><span class="dl">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="nx">f</span><span class="dl">"</span><span class="s2">Program RAM Usage: {ram_usage_gb:.2f} GB</span><span class="dl">"</span><span class="p">)</span>

        <span class="nx">number</span> <span class="o">+=</span> <span class="mi">2</span>



<span class="nx">start_time</span> <span class="o">=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="nf">find_primes</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></figure>

      </div>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#DSA">DSA</a>
          
            <a href="/tags#optimization">optimization</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Optimized+prime+miner&url=http%3A%2F%2Flocalhost%3A4000%2F2024-11-03-Prime-Miner-Optimization%2F"
      class="btn btn-social-icon btn-twitter" title="Share on X (Twitter)">
      <span class="fab fa-fw fa-x-twitter" aria-hidden="true"></span>
      <span class="sr-only">X (Twitter)</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2F2024-11-03-Prime-Miner-Optimization%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2024-11-03-Prime-Miner-Optimization%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2024-10-10-Tug-of-war-game/" data-toggle="tooltip" data-placement="top" title="Tug of war game">
            <i class="fas fa-arrow-left" alt="Previous Post"></i>
            <span class="d-none d-sm-inline-block">Previous Post</span>
          </a>
        </li>
        
        
      </ul>
      
  
  
  

  


  

  



    </div>
  </div>
</main>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      
<ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="mailto:aaditya.bhave07@gmail.com" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/aaditya07creates" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li></ul>


      
      <p class="copyright text-muted">
      
        Aaditya Bhave
        &nbsp;&bull;&nbsp;
      
      2024

      

      

      

      </p>
      <p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
